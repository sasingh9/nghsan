# H2 In-Memory Database Configuration for Tests
# Using MODE=Oracle to allow for Oracle-specific functions if needed.
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=Oracle
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password

# Disable JMX for tests to avoid conflicts
spring.jmx.enabled=false

# Kafka Test Configuration
# The embedded broker will override the bootstrap servers automatically.
spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}
# A group-id is still required for the placeholder resolution in @KafkaListener.
spring.kafka.consumer.group-id=test-group
app.kafka.topic.json-input=test-json-topic

# DDL for table creation in H2 (Oracle mode)
# Using syntax that is compatible with H2's Oracle mode for auto-incrementing keys.
app.db.ddl.create-table=CREATE TABLE json_docs (id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, data BLOB)
