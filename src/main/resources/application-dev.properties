# MySQL In-Memory Database Configuration for Development
spring.datasource.url=jdbc:mysql://localhost:3306/tradedevdb?createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# DDL for table creation in MySQL
app.db.ddl.create-table=CREATE TABLE json_docs (id BIGINT AUTO_INCREMENT PRIMARY KEY, message_key VARCHAR(36) UNIQUE, data BLOB, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)
app.db.ddl.create-trade-details-table=CREATE TABLE trade_details (id BIGINT AUTO_INCREMENT PRIMARY KEY, client_reference_number VARCHAR(255), fund_number VARCHAR(255), security_id VARCHAR(255), trade_date DATE, settle_date DATE, quantity DECIMAL(19, 4), price DECIMAL(19, 4), principal DECIMAL(19, 4), net_amount DECIMAL(19, 4))
app.db.ddl.create-trade-exceptions-table=CREATE TABLE trade_exceptions (id BIGINT AUTO_INCREMENT PRIMARY KEY, client_reference_number VARCHAR(255), error_type VARCHAR(20) NOT NULL, failed_trade_json BLOB, failure_reason VARCHAR(1000), created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)
app.db.ddl.create-user-table=CREATE TABLE app_user (id BIGINT AUTO_INCREMENT PRIMARY KEY, username VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL, roles VARCHAR(255) NOT NULL)
app.db.ddl.create-entitlements-table=CREATE TABLE user_fund_entitlements (id BIGINT AUTO_INCREMENT PRIMARY KEY, user_id BIGINT NOT NULL, fund_number VARCHAR(255) NOT NULL, FOREIGN KEY (user_id) REFERENCES app_user(id))
